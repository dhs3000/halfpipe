# Generated using halfpipe cli version 0.0.0-DEV
jobs:
- build_log_retention:
    minimum_succeeded_builds: 1
  name: push to docker registry
  plan:
  - in_parallel:
      fail_fast: true
      steps:
      - attempts: 2
        get: git
        trigger: true
      - attempts: 2
        get: cron
        trigger: true
    timeout: 1h
  - attempts: 1
    params:
      build: git/e2e/timer-trigger
      build_args:
        A: a
        ARTIFACTORY_PASSWORD: ((artifactory.password))
        ARTIFACTORY_URL: ((artifactory.url))
        ARTIFACTORY_USERNAME: ((artifactory.username))
        B: b
      dockerfile: git/e2e/timer-trigger/Dockerfile
      tag_as_latest: true
      tag_file: git/.git/ref
    put: halfpipe-fly
    timeout: 1h
  serial: true
resource_types:
- name: cron-resource
  source:
    repository: cftoolsmiths/cron-resource
    tag: v0.3
  type: registry-image
  unique_version_history: true
resources:
- check_every: 10m
  name: git
  source:
    branch: 6.5.1
    private_key: ((halfpipe-github.private_key))
    uri: git@github.com:springernature/halfpipe.git
  type: git
- check_every: 1m
  name: cron
  source:
    expression: '* * * * *'
    fire_immediately: true
    location: UTC
  type: cron-resource
- check_every: 24h
  name: halfpipe-fly
  source:
    password: verysecret
    repository: springerplatformengineering/halfpipe-fly
    username: rob
  type: docker-image

