# Generated using halfpipe cli version 0.0.0-DEV
resources:
- name: git
  type: git
  source:
    branch: master
    paths:
    - e2e/deploy-cf-rolling
    private_key: ((halfpipe-github.private_key))
    uri: git@github.com:springernature/halfpipe.git
  check_every: 10m
- name: rolling cf dev-api engineering-enablement dev
  type: rolling-deploy
  source:
    api: dev-api
    org: engineering-enablement
    password: very-secret
    space: dev
    username: michiel
  check_every: 24h
resource_types:
- name: rolling-deploy
  type: registry-image
  source:
    password: ((halfpipe-gcr.private_key))
    repository: eu.gcr.io/halfpipe-io/rolling-cf-resource
    tag: stable
    username: _json_key
jobs:
- name: deploy to cf
  serial: true
  plan:
  - in_parallel:
      steps:
      - get: git
        trigger: true
        attempts: 2
      fail_fast: true
    timeout: 5m
  - put: cf rolling deploy
    resource: rolling cf dev-api engineering-enablement dev
    params:
      appPath: git/e2e/deploy-cf-rolling
      command: halfpipe-rolling-deploy
      gitRefPath: git/.git/ref
      manifestPath: git/e2e/deploy-cf-rolling/manifest.yml
      timeout: 5m
    timeout: 5m
    attempts: 2

